<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Pensamientos Irreverentes</title>
        <!-- Custom Style -->
        <link rel="stylesheet" href="public/styles/main.css" />
        <link rel="stylesheet" href="public/styles/button-bubble.css" />
        <link rel="stylesheet" href="public/styles/photo-effect.css" />
        <!-- Icons -->
        <link
            href="https://cdn.lineicons.com/5.0/lineicons.css"
            rel="stylesheet"
        />
        <script src="https://cdn.lordicon.com/lordicon.js"></script>
        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Birthstone&family=Fredoka:wght@300..700&display=swap"
            rel="stylesheet"
        />
        <!-- Favicon -->
        <link
            rel="apple-touch-icon"
            sizes="57x57"
            href="public/favicon/apple-icon-57x57.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="60x60"
            href="public/favicon/apple-icon-60x60.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="72x72"
            href="public/favicon/apple-icon-72x72.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="76x76"
            href="public/favicon/apple-icon-76x76.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="114x114"
            href="public/favicon/apple-icon-114x114.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="120x120"
            href="public/favicon/apple-icon-120x120.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="144x144"
            href="public/favicon/apple-icon-144x144.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="152x152"
            href="public/favicon/apple-icon-152x152.png"
        />
        <link
            rel="apple-touch-icon"
            sizes="180x180"
            href="public/favicon/apple-icon-180x180.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="192x192"
            href="public/favicon/android-icon-192x192.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="public/favicon/favicon-32x32.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="96x96"
            href="public/favicon/favicon-96x96.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="16x16"
            href="public/favicon/favicon-16x16.png"
        />
        <meta name="msapplication-TileColor" content="#ffffff" />
        <meta name="msapplication-TileImage" content="/ms-icon-144x144.png" />
        <!-- Tailwind CSS -->
        <script src="https://cdn.tailwindcss.com"></script>
        <!-- Tailwind Configuration -->
        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        colors: {
                            base: {
                                50: "#f2fbf9",
                                100: "#d5f2eb",
                                200: "#aae5d8",
                                300: "#78d0bf",
                                400: "#4cb5a4",
                                500: "#329a8a",
                                600: "#267b71",
                                700: "#246961",
                                800: "#1f504b",
                                900: "#1e4340",
                                950: "#0c2725",
                            },
                            background: {
                                50: "#fffefb",
                                100: "#f5f4f1",
                                200: "#eeece7",
                                300: "#dbd7cd",
                                400: "#c4bdad",
                                500: "#aba08c",
                                600: "#9a8b75",
                                700: "#8e7c68",
                                800: "#766758",
                                900: "#61544b",
                                950: "#50473e",
                            },
                            accent: {
                                50: "#ffffe7",
                                100: "#feffc1",
                                200: "#fffd86",
                                300: "#fff441",
                                400: "#ffe60d",
                                500: "#ffd700",
                                600: "#d19e00",
                            },
                        },
                    },
                },
            };
        </script>
        <!-- Carousel -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
        />
        <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
        <!-- Map -->
        <script
            src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""
        ></script>
        <link
            rel="stylesheet"
            href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
            integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
            crossorigin=""
        />
        <style>
            #map {
                width: 100%;
                height: 100%;
            }
        </style>
    </head>
    <body
        class="bg-background-300 fredoka"
        onclick="(!dropdownMenu.classList.contains('hidden') &&
                !dropdownButton.contains(event.target) &&
                !dropdownMenu.contains(event.target)) && dropdownMenu.classList.add('hidden');"
    >
        <header
            class="fixed top-[30px] left-[30px] z-[900] flex justify-between w-[calc(100%-60px)]"
        >
            <a href="/pensamientos-irreverentes">
                <span
                    class="absolute glass w-auto h-full p-4 flex gap-2 items-center -rotate-[.01turn] text-[1.1rem] hover:scale-105 transition-transform duration-300"
                >
                    <i class="lni lni-home-2"></i>
                    Inicio
                </span>
            </a>
            <div class="relative">
                <button
                    id="dropdownButton"
                    class="flex w-auto h-full p-4 gap-2 items-center rotate-[.01turn] text-xl absolute right-full glass hover:scale-105 transition-transform duration-300"
                    onclick="dropdownMenu.classList.toggle('hidden');"
                >
                    <i class="lni lni-gear-1 animate-spin-slow"></i>
                </button>
                <div
                    id="dropdownMenu"
                    class="hidden absolute right-0 mt-12 mr-5 w-56 bg-background-50 backdrop-blur-md rounded-xl shadow-xl transform origin-top-right transition-all duration-300 border border-background-200"
                >
                    <form action="" method="get">
                        <ul class="p-4 flex flex-col gap-4">
                            <li>
                                <label class="relative block">
                                    <p
                                        class="absolute -top-2.5 left-3 px-2 text-[0.7rem] bg-background-50 text-custom-900 font-medium rounded"
                                    >
                                        Ciudad
                                    </p>
                                    <select
                                        name="ciudadId"
                                        id="cities-select"
                                        class="p-3 bg-background-50/50 rounded-lg w-full border border-background-300 hover:border-background-400 focus:border-accent-500 focus:ring-2 focus:ring-accent-200 outline-none transition-all duration-200"
                                        onchange="this.form.submit()"
                                    >
                                        <!-- Dinamically populate the options -->
                                    </select>
                                </label>
                            </li>
                            <li>
                                <label class="relative block">
                                    <p
                                        class="absolute -top-2.5 left-3 px-2 text-[0.7rem] bg-background-50 text-custom-900 font-medium rounded"
                                    >
                                        Estilo del mapa
                                    </p>
                                    <select
                                        id="map-style-select"
                                        class="p-3 bg-background-50/50 rounded-lg w-full border border-background-300 hover:border-background-400 focus:border-accent-500 focus:ring-2 focus:ring-accent-200 outline-none transition-all duration-200"
                                    >
                                        <option
                                            value="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                                        >
                                            Est√°ndar
                                        </option>
                                        <option
                                            value="https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"
                                        >
                                            Claro
                                        </option>
                                        <option
                                            value="https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"
                                        >
                                            Oscuro
                                        </option>
                                        <option
                                            value="https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"
                                        >
                                            Satelital
                                        </option>
                                        <option
                                            value="https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png"
                                        >
                                            Topogr√°fico
                                        </option>
                                    </select>
                                </label>
                            </li>
                            <li>
                                <label class="relative block">
                                    <p
                                        class="absolute -top-2.5 left-3 px-2 text-[0.7rem] bg-background-50 text-custom-900 font-medium rounded"
                                    >
                                        Categor√≠a especial
                                    </p>
                                    <select
                                        id="special-select"
                                        class="p-3 bg-background-50/50 rounded-lg w-full border border-background-300 hover:border-background-400 focus:border-accent-500 focus:ring-2 focus:ring-accent-200 outline-none transition-all duration-200"
                                        name="special"
                                        onchange="this.form.submit()"
                                        value="HP"
                                    >
                                        <option value="HP">‚úåÔ∏è Todo</option>
                                        <option value="">üí≠ Irreverente</option>
                                        <option value="ST">
                                            üõ¨ Soy turista
                                        </option>
                                        <option value="EG">üç¥ El goloso</option>
                                        <option value="EJ">
                                            üéâ Espantajopo
                                        </option>
                                        <option value="TL">
                                            üïë Tiempo limitado
                                        </option>
                                    </select>
                                </label>
                            </li>
                        </ul>
                    </form>
                </div>
            </div>
        </header>
        <main class="flex flex-col gap-8">
            <article
                class="w-full h-screen flex flex-col justify-center items-center gap-8"
            >
                <section
                    class="w-[90vw] h-[80vh] bg-background-100 rounded-3xl p-4 flex flex-col gap-8 relative"
                >
                    <div id="map" class="w-full h-full rounded-2xl z-50"></div>
                </section>
                <section id="cards" class="absolute w-full h-screen">
                    <!-- Dinamically populate the cards -->
                </section>
            </article>
        </main>
        <footer
            class="mt-10 py-10 px-8 rounded-t-3xl flex flex-col justify-center items-center gap-8 mx-2 bg-background-100"
            style="box-shadow: 0 -10px 25px -5px rgba(0, 0, 0, 0.1)"
        >
            <h3 class="text-2xl font-semibold">
                Explora sin l√≠mites, comparte sin filtros
            </h3>
            <p class="text-center">
                ¬øTienes un lugar secreto? <br />
                Llena este peque√±o formulario y h√°znoslos saber
            </p>
            <a
                href="https://docs.google.com/forms/d/e/1FAIpQLSeR4KtOy_Me3Z5BWValmBI5vEuX11fdSZs9Qy74PJPjMkFTuA/viewform?usp=header"
                ><svg
                    class="svg-bubble"
                    xmlns="http://www.w3.org/2000/svg"
                    version="1.1"
                >
                    <defs>
                        <filter id="gooey">
                            <feGaussianBlur
                                in="SourceGraphic"
                                stdDeviation="5"
                                result="blur"
                            />
                            <feColorMatrix
                                in="blur"
                                type="matrix"
                                values="1 0 0 0 0  
                                    0 1 0 0 0  
                                    0 0 1 0 0  
                                    0 0 0 19 -9"
                                result="highContrastGraphic"
                            />
                            <feComposite
                                in="SourceGraphic"
                                in2="highContrastGraphic"
                                operator="atop"
                            />
                        </filter>
                    </defs>
                </svg>
                <button
                    id="gooey-button"
                    class="relative text-white bg-base-400 px-6 py-3 border-none focus:outline-none rounded-md"
                >
                    Formulario <i class="lni lni-file-plus-circle"></i>
                    <span class="bubbles absolute inset-0">
                        <span class="bubble bg-base-400"></span>
                        <span class="bubble bg-base-400"></span>
                        <span class="bubble bg-base-400"></span>
                        <span class="bubble bg-base-400"></span>
                        <span class="bubble bg-base-400"></span>
                        <span class="bubble bg-base-400"></span>
                        <span class="bubble bg-base-400"></span>
                        <span class="bubble bg-base-400"></span>
                        <span class="bubble bg-base-400"></span>
                        <span class="bubble bg-base-400"></span>
                    </span></button
            ></a>
        </footer>
        <!-- Photo Effect -->
        <div
            id="flashOverlay"
            class="fixed inset-0 bg-white opacity-0 pointer-events-none z-50"
        ></div>
        <audio
            id="cameraSound"
            src="https://www.soundjay.com/mechanical/camera-shutter-click-01.mp3"
            preload="auto"
        ></audio>
        <!-- Templates -->
        <template id="card-template">
            <div
                class="fixed w-full h-full backdrop-blur-md bg-background-100/50 z-[1000] flex items-center justify-center [&.show]:scale-100 [&.show]:opacity-100 opacity-0 scale-0 transition-all duration-300 ease-[ease] outline-none"
                tabindex="0"
                onkeydown="if (event.key === 'Escape') this.classList.remove('show');"
            >
                <button
                    class="group p-2 bg-background-50/80 hover:bg-background-200 rounded-full text-background-950 text-2xl font-bold absolute top-4 right-4 shadow-lg transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-accent-200 flex items-center justify-center"
                    onclick="this.parentElement.classList.remove('show');"
                    aria-label="Cerrar"
                >
                    <i class="lni lni-xmark"></i>
                </button>
                <div
                    class="w-[300px] md:w-[400px] lg:w-[500px] flex justify-center items-center"
                >
                    <div
                        class="transition-all duration-300 ease-[ease] relative h-full"
                    >
                        <div
                            class="absolute top-0 left-0 w-full h-full bg-white border-2 border-background-950 -z-10 transition-transform duration-300 origin-center translate-y-[-2%] rotate-[-6deg] shadow-lg"
                        ></div>
                        <div
                            class="absolute top-0 left-0 w-full h-full bg-white border-2 border-background-950 -z-10 transition-transform duration-300 origin-center translate-y-[2%] rotate-[6deg] shadow-lg"
                        ></div>
                        <div
                            class="aspect-[3/2] bg-white border-2 border-background-950 p-[5%] pt-[1%] relative z-10 transition-all duration-300 ease-in-out shadow-lg relative flex flex-col gap-0"
                        >
                            <button
                                class="text-lg hover:scale-110 self-end"
                                card-share
                            >
                                <i class="lni lni-share-1"></i>
                            </button>
                            <div
                                class="w-full aspect-square bg-gray-200 overflow-hidden transition-all duration-300 relative"
                            >
                                <div
                                    class="absolute top-3 left-3 z-20 hidden"
                                    card-date
                                >
                                    <span
                                        class="bg-accent-400 text-background-950 text-xs font-bold px-3 py-1 rounded-full shadow-lg"
                                    >
                                        <data card-date-start
                                            ><!-- 01/06/2025 --></data
                                        >
                                        &ndash;
                                        <data card-date-end
                                            ><!-- 05/06/2025 --></data
                                        >
                                    </span>
                                </div>
                                <img
                                    src="public/images/default.jpg"
                                    alt="Imagen del lugar"
                                    class="w-full h-full object-cover transition-transform duration-300"
                                    loading="lazy"
                                    card-image
                                />
                                <div
                                    class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent pointer-events-none"
                                ></div>
                                <div
                                    class="absolute bottom-0 left-0 w-full px-4 pb-3 flex flex-col z-10"
                                >
                                    <h3
                                        class="text-xs font-semibold text-accent-400 drop-shadow mb-1 uppercase tracking-wide"
                                        card-category
                                    >
                                        <!-- Categor√≠a -->
                                    </h3>
                                    <p
                                        class="text-lg text-white font-bold drop-shadow mb-0.5"
                                        card-title
                                    >
                                        <!-- Nombre del Secreto -->
                                    </p>
                                    <p
                                        class="text-sm text-white font-medium drop-shadow"
                                        card-description
                                    >
                                        <!-- Descripci√≥n del lugar -->
                                    </p>
                                    <div
                                        class="flex flex-row items-center justify-between"
                                    >
                                        <p
                                            class="text-xs text-background-100 font-medium mt-1 flex items-center gap-1"
                                        >
                                            <i class="lni lni-map-marker-5"></i>
                                            <span card-address
                                                ><!-- Direcci√≥n del evento --></span
                                            >
                                        </p>
                                        <a
                                            href=""
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            class="text-xs text-accent-400 mt-1 hover:text-accent-500 transition-colors flex items-center gap-1"
                                            card-link
                                        >
                                            <span><!-- Sitio oficial --></span>
                                            <i class="lni lni-globe-1"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </template>
        <!-- Custom Script -->
        <script src="./public/scripts/init-search.js" type="module"></script>
    </body>
</html>
